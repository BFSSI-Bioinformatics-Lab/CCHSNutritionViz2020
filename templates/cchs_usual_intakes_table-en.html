<!DOCTYPE html><!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]--><!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
            wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Content page - Canada.ca
    </title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name="description"
          content="Web Experience Toolkit (WET) includes reusable components for building and maintaining innovative Web sites that are accessible, usable, and interoperable. These reusable components are open source software and free for use by departments and external Web communities">
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="../static/GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/GCWeb/css/theme.min.css">

    {# Positioning of loading data message #}
    <link rel="stylesheet" href="../static/css/cchs_usual_intakes_table.css">
    <link rel="stylesheet" href="../static/css/cchs_usual_intakes.css">

    <!--<![endif]-->
    <!--[if lt IE 9]>
    <link href="../static/GCWeb/assets/favicon.ico" rel="shortcut icon"/>

    <link rel="stylesheet" href="../static/GCWeb/css/ie8-theme.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
    <script src="../static/wet-boew/js/ie8-wet-boew.min.js"></script>
    <![endif]-->
    <!--[if lte IE 9]>


    <![endif]-->
    <noscript>
        <link rel="stylesheet" href="../static/wet-boew/css/noscript.min.css"/>
    </noscript>
</head>
<body vocab="http://schema.org/" typeof="WebPage">
<nav>
    <ul id="wb-tphp">
        <li class="wb-slc">
            <a class="wb-sl" href="#wb-cont">Skip to main content</a>
        </li>
        <li class="wb-slc">
            <a class="wb-sl" href="#wb-info">Skip to "About government"</a>
        </li>
    </ul>
</nav>
<header>
    <div id="wb-bnr" class="container">
        <section id="wb-lng" class="text-right">
            <h2 class="wb-inv">Language selection</h2>
            <ul class="list-inline margin-bottom-none">
                <li><a lang="fr" hreflang="fr" href="content-fr.html">Français</a></li>
            </ul>
        </section>
        <div class="row">
            <div class="brand col-xs-5 col-md-4" property="publisher" typeof="GovernmentOrganization">
                <a href="https://www.canada.ca/en.html" property="url"><img src="../static/GCWeb/assets/sig-blk-en.svg"
                                                                            alt=""
                                                                            property="logo"><span class="wb-inv"
                                                                                                  property="name"> Government of Canada / <span
                        lang="fr">Gouvernement du Canada</span></span></a>
                <meta property="areaServed" typeof="Country" content="Canada">
                <link property="logo" href="../static/GCWeb/assets/wmms-blk.svg">
            </div>
            <section id="wb-srch" class="col-lg-8 text-right">
                <h2>Search</h2>
                <form action="#" method="post" name="cse-search-box" role="search" class="form-inline">
                    <div class="form-group">
                        <label for="wb-srch-q" class="wb-inv">Search Canada.ca</label>
                        <input id="wb-srch-q" list="wb-srch-q-ac" class="wb-srch-q form-control" name="q" type="search"
                               value="" size="34" maxlength="170" placeholder="Search Canada.ca">
                        <datalist id="wb-srch-q-ac">
                        </datalist>
                    </div>
                    <div class="form-group submit">
                        <button type="submit" id="wb-srch-sub" class="btn btn-primary btn-small" name="wb-srch-sub">
                            <span class="glyphicon-search glyphicon"></span><span class="wb-inv">Search</span></button>
                    </div>
                </form>
            </section>
        </div>
    </div>
    <nav class="gcweb-menu" typeof="SiteNavigationElement">
        <div class="container">
            <h2 class="wb-inv">Menu</h2>
            <button type="button" aria-haspopup="true" aria-expanded="false"><span class="wb-inv">Main </span>Menu <span
                    class="expicon glyphicon glyphicon-chevron-down"></span></button>
            <ul role="menu" aria-orientation="vertical" data-ajax-replace="../static/ajax/sitemenu-v5-en.html">
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/jobs.html">Jobs and
                    the workplace</a></li>
                <li role="presentation"><a role="menuitem"
                                           href="https://www.canada.ca/en/services/immigration-citizenship.html">Immigration
                    and citizenship</a></li>
                <li role="presentation"><a role="menuitem" href="https://travel.gc.ca/">Travel and tourism</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/business.html">Business
                    and industry</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/benefits.html">Benefits</a>
                </li>
                <li role="presentation"><a role="menuitem"
                                           href="https://www.canada.ca/en/services/health.html">Health</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/taxes.html">Taxes</a>
                </li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/environment.html">Environment
                    and natural resources</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/defence.html">National
                    security and defence</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/culture.html">Culture,
                    history and sport</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/policing.html">Policing,
                    justice and emergencies</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/transport.html">Transport
                    and infrastructure</a></li>
                <li role="presentation"><a role="menuitem"
                                           href="https://international.gc.ca/world-monde/index.aspx?lang=eng">Canada and
                    the world</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/finance.html">Money
                    and finances</a></li>
                <li role="presentation"><a role="menuitem" href="https://www.canada.ca/en/services/science.html">Science
                    and innovation</a></li>
            </ul>
        </div>
    </nav>
    <nav id="wb-bc" property="breadcrumb">
        <h2>You are here:</h2>
        <div class="container">
            <ol class="breadcrumb">
                <li><a href="https://www.canada.ca/en.html">Home</a></li>
            </ol>
        </div>
    </nav>
</header>
<main property="mainContentOfPage" class="container" typeof="WebPageElement">
    <h1 property="name" id="wb-cont">Usual intakes from food, 2015</h1>
    <p><strong>From <a href="#">Health Canada</a></strong></p>

    <section>
        <div class="row">
            <div class="btn-group btn-group-lg btn-group-justified" style="padding:20px 0px;">
                <a class="btn btn-default toolTab" role="button" href="/">About the data</a>
                <a class="active btn btn-default btn-primary toolTab" role="button" href="data_table">Data table</a>
                <a class="btn btn-default toolTab" role="button" href="distribution">Distribution curves</a>
                <a class="btn btn-default toolTab" role="button" href="geographic">Geographic comparison</a>
            </div>
        </div>
    </section>

    <section>
        {# Main content #}
        <div class="row">
            {# Data filtering panel and Download buttons #}
            <div class="row">
                <section class="alert alert-info">
                    <p>
                        For more information on CCHS - Nutrition, please consult the
                        <a href="https://www.canada.ca/en/health-canada/services/food-nutrition/food-nutrition-surveillance/health-nutrition-surveys/canadian-community-health-survey-cchs/reference-guide-understanding-using-data-2015.html">Reference
                            Guide to Understanding and Using the Data</a> and the <a href="https://www.canada.ca/en/health-canada/services/food-nutrition/food-nutrition-surveillance/health-nutrition-surveys/canadian-community-health-survey-cchs/compendium-data-tables-intakes-energy-nutrients-other-food.html">Statistical
                        Methodology Guide</a>.
                    </p>
                </section>
            </div>
            <div class="col-md-3">


                {# Data filtering panel #}
                <div class="row">
                    <h4 class="wb-inv">Filtering Options</h4>
                    <details open>
                        <summary><h4 class="h4">Filter Options</h4></summary>
                        <p class="mrgn-tp-md">Use the filter options below to change the focus of your results in
                            following data table</p>
                        <form class="wb-tables-filter" data-bind-to="dataset-filter">
                            <div class="form-group">
                                {# Note that data-column refers to table column position; 0 indexed #}
                                <label for="dt_nutrient">Nutrient/Item</label>
                                <select class="form-control" id="dt_nutrient" name="dt_nutrient" data-column="0">
                                    <option value="">All nutrients</option>
                                    <option value="Caffeine">Caffeine (mg/d)</option>
                                    <option value="Calcium">Calcium (mg/d)</option>
                                    <option value="Cholesterol">Cholesterol (mg/d)</option>
                                    <option value="Folacin">Folacin (mcg/d)</option>
                                    <option value="Folate">Folate (DFE/d)</option>
                                    <option value="Iron">Iron (mg/d)</option>
                                    <option value="Linoleic acid">Linoleic acid (g/d)</option>
                                    <option value="Linolenic acid">Linolenic acid (g/d)</option>
                                    <option value="Magnesium">Magnesium (mg/d)</option>
                                    <option value="Moisture">Moisture (g/d)</option>
                                    <option value="Naturally occurring folate">Naturally occurring folate
                                        (mcg/d)
                                    </option>
                                    <option value="Niacin">Niacin (NE/d)</option>
                                    <option value="Percentage of total energy intake from carbohydrates">Percentage of
                                        total
                                        energy intake from carbohydrates
                                    </option>
                                    <option value="Percentage of total energy intake from fat">Percentage of total
                                        energy
                                        intake from fat
                                    </option>
                                    <option value="Percentage of total energy intake from linoleic acid">Percentage of
                                        total
                                        energy intake from linoleic acid
                                    </option>
                                    <option value="Percentage of total energy intake from linolenic acid">Percentage of
                                        total energy intake from linolenic acid
                                    </option>
                                    <option value="Percentage of total energy intake from monounsaturated fats">
                                        Percentage
                                        of total energy intake from monounsaturated fats
                                    </option>
                                    <option value="Percentage of total energy intake from polyunsaturated fats">
                                        Percentage
                                        of total energy intake from polyunsaturated fats
                                    </option>
                                    <option value="Percentage of total energy intake from protein">Percentage of total
                                        energy intake from protein
                                    </option>
                                    <option value="Percentage of total energy intake from saturated fats">Percentage of
                                        total energy intake from saturated fats
                                    </option>
                                    <option value="Percentage of total energy intake from sugars">Percentage of total
                                        energy
                                        intake from sugars
                                    </option>
                                    <option value="Phosphorus">Phosphorus (mg/d)</option>
                                    <option value="Potassium">Potassium (mg/d)</option>
                                    <option value="Protein">Protein (g/d)</option>
                                    <option value="Riboflavin">Riboflavin (mg/d)</option>
                                    <option value="Sodium">Sodium (mg/d)</option>
                                    <option value="Thiamin">Thiamin (mg/d)</option>
                                    <option value="Total carbohydrates">Total carbohydrates (g/d)</option>
                                    <option value="Total dietary fibre">Total dietary fibre (g/d)</option>
                                    {# TODO: Total energy intake is bugged because of all of the "Percentage of total energy intake" values #}
                                    <option value="Total energy intake">Total energy intake (kcal/d)</option>
                                    <option value="Total fats">Total fats (g/d)</option>
                                    <option value="Total monounsaturated fats">Total monounsaturated fats (g/d)
                                    </option>
                                    <option value="Total polyunsaturated fatty acids">Total polyunsaturated fatty
                                        acids (g/d)
                                    </option>
                                    <option value="Total saturated fats">Total saturated fats (g/d)</option>
                                    <option value="Total sugars">Total sugars (g/d)</option>
                                    <option value="Vitamin A">Vitamin A (RAE/d)</option>
                                    <option value="Vitamin B12">Vitamin B12 (mcg/d)</option>
                                    <option value="Vitamin B6">Vitamin B6 (mg/d)</option>
                                    <option value="Vitamin C">Vitamin C (mg/d)</option>
                                    <option value="Vitamin D">Vitamin D (mcg/d)</option>
                                    <option value="Zinc">Zinc (mg/d)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <fieldset>
                                    <legend>
                                        <span class="field-name">Region</span>
                                    </legend>
                                    <ul>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region_all"

                                                       type="checkbox"
                                                       name="dt_region_all" data-column="1"
                                                       value="">All regions</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox"
                                                       name="dt_region" data-column="1"
                                                       value="Canada excluding territories">Canada excluding
                                                territories</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Alberta">Alberta</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Atlantic Region">Atlantic Region</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="British Columbia">British Columbia</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Manitoba">Manitoba</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="New Brunswick">New Brunswick</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Newfoundland and Labrador">Newfoundland and
                                                Labrador</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Nova Scotia">Nova Scotia</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Ontario">Ontario</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Prairie Region">Prairie Region</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Prince Edward Island">Prince Edward Island</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Quebec">Quebec</label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_region">
                                                <input id="dt_region" type="checkbox" name="dt_region" data-column="1"
                                                       value="Saskatchewan">Saskatchewan</label>
                                        </li>
                                    </ul>
                                </fieldset>
                            </div>
                            <div class="form-group">
                                <fieldset>
                                    <legend>
                                        <span class="field-name">Sex</span>
                                    </legend>
                                    <ul>
                                        <li class="checkbox">
                                            <label for="dt_sex">
                                                <input id="dt_sex" type="checkbox" name="dt_sex" data-column="2"
                                                       value="Both">Both
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_sex">
                                                <input id="dt_sex" type="checkbox" name="dt_sex" data-column="2"
                                                       value="Male">Male
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_sex">
                                                <input id="dt_sex" type="checkbox" name="dt_sex" data-column="2"
                                                       value="Female">Female
                                            </label>
                                        </li>
                                    </ul>
                                </fieldset>
                            </div>
                            <div class="form-group">
                                <fieldset>
                                    <legend>
                                        <span class="field-name">Age</span>
                                    </legend>
                                    <ul>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age dt_age_both"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="">All age groups
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age_both"
                                                       type="checkbox"
                                                       name="dt_age_both" data-column="3"
                                                       value="1-3 years">1-3 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age_both"
                                                       type="checkbox"
                                                       name="dt_age_both" data-column="3"
                                                       value="4-8 years">4-8 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="9-13 years">9-13 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age" class="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="14-18 years">14-18 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="19-30 years">19-30 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="31-50 years">31-50 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="51-70 years">51-70 years
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age"
                                                       type="checkbox" name="dt_age" data-column="3"
                                                       value="19 years and over">19 years and over
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dt_age">
                                                <input id="dt_age" class="dt_age" type="checkbox"
                                                       name="dt_age" data-column="3"
                                                       value="71 years and over">71 years and over
                                            </label>
                                        </li>

                                    </ul>
                                </fieldset>
                            </div>
                            <div class="form-group">
                                <button type="submit" id="filterBtn" class="btn btn-primary"
                                        aria-controls="dataset-filter">Filter
                                </button>
                            </div>
                            <div class="form-group">
                                <button type="reset" class="btn btn-link btn-sm p-0 reset">Reset to
                                    defaults</button>
                            </div>
                        </form>
                    </details>
                </div>

                {# Column display panel #}
                <div class="row">
                    <h4 class="wb-inv">Display Options</h4>
                    <details open>
                        <summary><h4 class="h4">Display Options</h4></summary>
                        <p class="mrgn-tp-md">Use the options below to toggle which columns to display in the table.
                            Clicking a checkbox will show the selected group.</p>
                        <form>

                            <div class="form-group">
                                <fieldset>
                                    <legend>
                                        <span class="field-name">Show Columns</span>
                                    </legend>
                                    <ul>
{#                                        <li class="checkbox">#}
{#                                            <label for="dp_mean">#}
{#                                                <input class="toggle-vis" id="dp_mean" type="checkbox" name="dp_mean"#}
{#                                                       value="Mean">Mean#}
{#                                            </label>#}
{#                                        </li>#}
                                        {#   <li class="checkbox">#}
                                        {#       <label for="dp_standarderrror">#}
                                        {#           <input class="toggle-vis" id="dp_standarderrror" type="checkbox"#}
                                        {#                  name="dp_standarderrror" value="Standard Error">Standard Error#}
                                        {#       </label>#}
                                        {#   </li>#}
                                        <li class="checkbox">
                                            <label for="dp_percentiles">
                                                <input class="toggle-vis" id="dp_percentiles" type="checkbox"
                                                       name="dp_percentiles" value="Percentiles">Percentiles
                                            </label>
                                        </li>
                                        <li class="checkbox">
                                            <label for="dp_dri">
                                                <input class="toggle-vis" id="dp_dri" type="checkbox" name="dp_dri"
                                                       value="DRI Comparison">DRI Comparison
                                            </label>
                                        </li>
                                    </ul>
                                </fieldset>
                            </div>
                        </form>
                    </details>
                </div>

            </div>
            {# Data table #}
            <div class="col-md-9">
                <table class="wb-tables table table-striped table-hover table-condensed" aria-live="polite"
                       id="dataset-filter" data-wb-tables='{
                        "bDeferRender": true,
                         "language": {
                                "processing": "Loading data. Please wait..."
                            },
                        "processing": true,
                        "scrollX": true,
                        {# Modify how long table is (was 30) #}
                        "scrollY": "50em",
                        "ajaxSource": "../static/data/data_table_flattened-en.min.json",
                         {# Modify number of items in table - now starts at 50 #}
                         "lengthMenu": [[ 50, 100, 250, -1], [50, 100, 250, "All"]]
                         }'>
                    <thead>
                    <tr>
                        <th>Nutrient/Item (unit)</th>
                        <th>Reg_Prov</th>
                        <th>Sex</th>
                        <th>Age (years)</th>
                        <th>n</th>
                        <th>Mean</th>
                        <th>SE_Mean</th>
                        <th>P5</th>
                        <th>P5_SE</th>
                        <th>P10</th>
                        <th>P10_SE</th>
                        <th>P25</th>
                        <th>P25_SE</th>
                        <th>P50</th>
                        <th>P50_SE</th>
                        <th>P75</th>
                        <th>P75_SE</th>
                        <th>P90</th>
                        <th>P90_SE</th>
                        <th>P95</th>
                        <th>P95_SE</th>
                        <th>EAR</th>
                        <th>% &lt;EAR</th>
                        <th>% &lt;EAR_SE</th>
                        <th>AI</th>
                        <th>% &gt;AI</th>
                        <th>% &gt;AI_SE</th>
                        <th>UL</th>
                        <th>% &gt;UL</th>
                        <th>% &gt;UL_SE</th>
                        <th>AMDR</th>
                        <th>% below AMDR</th>
                        <th>% below AMDR_SE</th>
                        <th>% within AMDR</th>
                        <th>% within AMDR_SE</th>
                        <th>% above AMDR</th>
                        <th>% above AMDR_SE</th>
                        <th>CDRR</th>
                        <th>% &gt;CDRR</th>
                        <th>% &gt;CDRR_SE</th>
                        <th>% Inadequacy</th>
                        <th>% Inadequacy_SE</th>
                    </tr>
                    </thead>
                </table>

                {# Note: the caption HTML tag appears to break the WET DataTables implementation, so using this element as an alternative #}
                <a href="https://www.canada.ca/en/health-canada/services/food-nutrition/food-nutrition-surveillance/health-nutrition-surveys/canadian-community-health-survey-cchs/2015-canadian-community-health-survey-nutrition-food-nutrition-surveillance.html"
                   target="_blank"
                   class="text-center">Data Source: <i>Statistics Canada, 2015 Canadian
                    Community Health Survey -
                    Nutrition, 2015, Share File.</i></a>

                {# Download panel #}
                <div class="row" style="margin-left: 2px; margin-top: 15px">
                    <h4 class="wb-inv">Download Options</h4>
                    <details open>
                        <summary><h4 class="h4">Download Options</h4></summary>
                        <p class="mrgn-tp-md">Use the buttons below to download the data</p>
                        <div class="form-group">
                            <button href="#" role="button" data-export="export"
                                    style="width:300px"
                                    class="btn btn-primary" id="filteredTableDownload"><span
                                    class="glyphicon glyphicon-cloud-download"></span> Displayed data (.csv)
                            </button>
                            <a download href="../static/data/data_table-en.csv" role="button"
                               style="width:300px; margin-left: 10px" class="btn btn-primary"
                               id="filteredTableDownload"><span
                                    class="glyphicon glyphicon-cloud-download"></span> All data (.csv)
                            </a>
                        </div>
                    </details>
                </div>

            </div>
        </div>
        <div class="row">
            <section>
                <h3>Notes & Legend</h3>
                <p><i>Please refer to the “About the data” tab for detailed notes that apply to all of the tables and
                    graphs in the Usual Intake Data Tool.</i></p>
                <table class="table table-condensed table-responsive">
                    <tbody>
                    <tr>
                        <td><strong>E</strong></td>
                        <td>Data with a coefficient of variation (CV) from 16.6% to 33.3%; interpret with caution.
                            This is shown on the graph through the use of striped bars.
                        </td>
                    </tr>
                    <tr>
                        <td><strong>&lt;3</strong></td>
                        <td>Data with a coefficient of variation (CV) greater than 33.3% with a 95% confidence interval
                            entirely between 0 and 3%; interpret with caution.
                    </tr>
                    <tr>
                        <td><strong>F</strong></td>
                        <td> Data with a coefficient of variation (CV) greater than 33.3% with a 95% confidence interval
                            not entirely between 0 and 3%; suppressed due to extreme sampling variability.
                    </tr>
                    <tr>
                        <td><strong>AI</strong></td>
                        <td>Adequate Intake</td>
                    </tr>
                    <tr>
                        <td><strong>AMDR</strong></td>
                        <td>Acceptable Macronutrient Distribution Range</td>
                    </tr>
                    <tr>
                        <td><strong>CDRR</strong></td>
                        <td>Chronic Disease Risk Reduction</td>
                    </tr>
                    <tr>
                        <td><strong>d</strong></td>
                        <td>Day</td>
                    </tr>
                    <tr>
                        <td><strong>DFE</strong></td>
                        <td>Dietary folate equivalent</td>
                    </tr>
                    <tr>
                        <td><strong>DRI</strong></td>
                        <td>Dietary Reference Intake</td>
                    </tr>
                    <tr>
                        <td><strong>EAR</strong></td>
                        <td>Estimated Average Requirement</td>
                    </tr>
                    <tr>
                        <td><strong>g</strong></td>
                        <td>Gram</td>
                    </tr>
                    <tr>
                        <td><strong>kcal</strong></td>
                        <td>Kilocalorie</td>
                    </tr>
                    <tr>
                        <td><strong>mcg</strong></td>
                        <td>Microgram</td>
                    </tr>
                    <tr>
                        <td><strong>mg</strong></td>
                        <td>Milligram</td>
                    </tr>
                    <tr>
                        <td><strong>NE</strong></td>
                        <td>Niacin equivalent</td>
                    </tr>
                    <tr>
                        <td><strong>P</strong></td>
                        <td>Percentile, e.g. 'P95' describes the 95th percentile.</td>
                    </tr>
                    <tr>
                        <td><strong>RAE</strong></td>
                        <td>Retinol activity equivalent</td>
                    </tr>
                    <tr>
                        <td><strong>SE</strong></td>
                        <td>Standard Error</td>
                    </tr>
                    <tr>
                        <td><strong>UL</strong></td>
                        <td>Tolerable Upper Intake Level</td>
                    </tr>

                    </tbody>
                </table>
            </section>
        </div>

    </section>


    <div class="pagedetails">
        <div class="row">
            <div class="col-sm-6 col-md-5 col-lg-4">
                <details class="brdr-0">
                    <summary class="btn btn-default text-center">Report a problem on this page</summary>
                    <div class="well row">
                        <div class="gc-rprt-prblm">
                            <div class="gc-rprt-prblm-frm gc-rprt-prblm-tggl">
                                <form action="#">
                                    <fieldset>
                                        <legend><span class="field-name">Please select all that apply: </span></legend>
                                        <div class="checkbox">
                                            <label for="problem1"><input type="checkbox" data-reveal="#broken"
                                                                         name="problem" value="Something is broken"
                                                                         id="problem1">Something is broken</label>
                                        </div>
                                        <div class="form-group hide" id="broken">
                                            <label for="problem1-detail">Provide more details (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem1-detail">
                                        </div>
                                        <div class="checkbox">
                                            <label for="problem2"><input type="checkbox" data-reveal="#spelling"
                                                                         name="problem"
                                                                         value="It has spelling or grammar mistakes"
                                                                         id="problem2">The page has spelling or grammar
                                                mistakes</label>
                                        </div>
                                        <div class="form-group hide" id="spelling">
                                            <label for="problem2-detail">Provide more details (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem2-detail">
                                        </div>
                                        <div class="checkbox">
                                            <label for="problem3"><input type="checkbox" data-reveal="#wrong"
                                                                         name="problem" value="The information is wrong"
                                                                         id="problem3">The information is wrong</label>
                                        </div>
                                        <div class="form-group hide" id="wrong">
                                            <label for="problem3-detail">Provide more details (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem3-detail">
                                        </div>
                                        <div class="checkbox">
                                            <label for="problem4"><input type="checkbox" data-reveal="#outdated"
                                                                         name="problem"
                                                                         value="The information is outdated"
                                                                         id="problem4">The information is
                                                outdated</label>
                                        </div>
                                        <div class="form-group hide" id="outdated">
                                            <label for="problem4-detail">Provide more details (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem4-detail">
                                        </div>
                                        <div class="checkbox">
                                            <label for="problem5"><input type="checkbox" data-reveal="#find"
                                                                         name="problem"
                                                                         value="I can’t find what I’m looking for"
                                                                         id="problem5">I can’t find what I’m looking for</label>
                                        </div>
                                        <div class="form-group hide" id="find">
                                            <label for="problem5-detail">Describe what you’re looking for
                                                (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem5-detail">
                                        </div>
                                        <div class="checkbox">
                                            <label for="problem6"><input type="checkbox" data-reveal="#confusing"
                                                                         name="problem" value="It’s confusing"
                                                                         id="problem6">Other</label>
                                        </div>
                                        <div class="form-group hide" id="confusing">
                                            <label for="problem6-detail">Provide more details (optional):</label>
                                            <input type="text" class="form-control full-width" id="problem6-detail">
                                        </div>
                                    </fieldset>
                                    <button type="submit" class="btn btn-primary wb-toggle"
                                            data-toggle='{"stateOff": "hide", "stateOn": "show", "selector": ".gc-rprt-prblm-tggl"}'>
                                        Submit
                                    </button>
                                </form>
                            </div>
                            <div class="gc-rprt-prblm-thnk gc-rprt-prblm-tggl hide">
                                <h3>Thank you for your help!</h3>
                                <p>You will not receive a reply. For enquiries, please <a
                                        href="https://www.canada.ca/en/contact.html">contact us</a>.</p>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
            <div class="wb-share col-sm-4 col-md-3 col-sm-offset-2 col-md-offset-4 col-lg-offset-5"
                 data-wb-share='{"lnkClass": "btn btn-default btn-block"}'></div>
        </div>
        <dl id="wb-dtmd">
            <dt>Date modified:&#32;</dt>
            <dd>
                <time property="dateModified">2017-09-29</time>
            </dd>
        </dl>
    </div>
</main>
<footer id="wb-info">
    <div class="landscape">
        <nav class="container wb-navcurr">
            <h2 class="wb-inv">About government</h2>
            <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                <li><a href="https://www.canada.ca/en/contact.html">Contact us</a></li>
                <li><a href="https://www.canada.ca/en/government/dept.html">Departments and agencies</a></li>
                <li><a href="https://www.canada.ca/en/government/publicservice.html">Public service and military</a>
                </li>
                <li><a href="https://www.canada.ca/en/news.html">News</a></li>
                <li><a href="https://www.canada.ca/en/government/system/laws.html">Treaties, laws and regulations</a>
                </li>
                <li><a href="https://www.canada.ca/en/transparency/reporting.html">Government-wide reporting</a></li>
                <li><a href="https://pm.gc.ca/eng">Prime Minister</a></li>
                <li><a href="https://www.canada.ca/en/government/system.html">How government works</a></li>
                <li><a href="https://open.canada.ca/en/">Open government</a></li>
            </ul>
        </nav>
    </div>
    <div class="brand">
        <div class="container">
            <div class="row">
                <nav class="col-md-9 col-lg-10 ftr-urlt-lnk">
                    <h2 class="wb-inv">About this site</h2>
                    <ul>
                        <li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
                        <li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
                        <li><a href="https://www1.canada.ca/en/newsite.html">About Canada.ca</a></li>
                        <li><a href="https://www.canada.ca/en/transparency/terms.html">Terms and conditions</a></li>
                        <li><a href="https://www.canada.ca/en/transparency/privacy.html">Privacy</a></li>
                    </ul>
                </nav>
                <div class="col-xs-6 visible-sm visible-xs tofpg">
                    <a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a>
                </div>
                <div class="col-xs-6 col-md-3 col-lg-2 text-right">
                    <img src="../static/GCWeb/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
                </div>
            </div>
        </div>
    </div>
</footer>
<!--[if gte IE 9 | !IE ]><!-->
<script src="../static/wet-boew/js/jquery/2.2.4/jquery.js"></script>
<script src="../static/wet-boew/js/wet-boew.min.js"></script>
<!--<![endif]-->

<!--[if lt IE 9]>
<script src="../static/wet-boew/js/ie8-wet-boew2.min.js"></script>

<![endif]-->
<script src="../static/GCWeb/js/theme.min.js"></script>

{# D3 #}
{#<script src="../static/js/d3.v5.min.js"></script>#}
{#<script src="../static/js/table-en.js"></script>#}


<script>

    // jquery to check and uncheck regions
    // if "all regions" check them all boxes will be checked and viceversa
    $("#dt_region_all").change(function () {
        $("input[name=dt_region]").prop('checked', $(this).prop("checked"));
    });
    // If one of the :other regions" is uncheck then "all regions" is unchecked
    $("input[name=dt_region]").change(function () {
      if($("input[name=dt_region]").length===$("input[name=dt_region]:checked").length)
        $("#dt_region_all").prop('checked', true);
      else
        $("#dt_region_all").prop('checked', false);
    });

    // jquery to disable age based on gender chosen

    $("input[value='Both']").click(function() {
        $(".dt_age").prop('disabled', $(this).is(":checked"));
    });

    $('input[value="Female"], input[value="Male"]').click(function() {
        $('.dt_age_both').prop('disabled', $(this).prop("checked"));
    });
    // reset "disabled" checkboxes when reset button is clicked
    $(".reset").click(function() {
        $(".dt_age, .dt_age_both").prop('disabled', false);
    });

    // Filtering options to hide/show columns
    $(".wb-tables").trigger("wb-init.wb-tables");
    $(document).on("wb-ready.wb", function (event) {
        // Columns that will be toggle to hide/show
        let hiddenColumns = [];
        let table = $('.wb-tables').DataTable()

        let defaultShowColumns =[]

        // Hide empty columns whenever the user filters the data
        $('#filterBtn').on('click', function (e) {
            console.log('clicked filter btn')
            hideEmptyCols($("#dataset-filter"))
        })
        // Hard coded indexes for columns to hide
        const meanColumns = [
            5, 6
        ]

        // const standardErrorColumns = [
        //     8, 10, 12, 14, 16, 18, 20, 23, 26, 29, 32, 34, 36, 39, 41
        // ]
        const percentilesColumns = [
            7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
        ]

        const driColumns = [
            21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41
        ]

        // Show only mean as Default for table
        defaultShowColumns.push(...percentilesColumns)
        defaultShowColumns.push(...driColumns)

        defaultShowColumns.forEach(function (c) {
                table.column(c).visible(false)
            })
        $('.toggle-vis').on('change', function (e) {
            e.preventDefault();


            // Text associated with clicked checkbox
            let checkboxValue = $(this)[0].value

            // Hide if checked
            if ($(this).is(":checked")) {
                {#console.log(`Hiding columns for ${$(this)[0].value}`)#}

                //if (checkboxValue === "Mean") {
                //    hiddenColumns.push(...meanColumns)
                //}
                // if (checkboxValue === "Standard Error") {
                //     hiddenColumns.push(...standardErrorColumns)
                // }
                if (checkboxValue === "Percentiles") {
                    hiddenColumns.push(...percentilesColumns)
                }
                if (checkboxValue === "DRI Comparison") {
                    hiddenColumns.push(...driColumns)
                }

                // Remove duplicates
                hiddenColumns = [...new Set(hiddenColumns)];

                // Disable visibility for columns in hiddenColumns array
                hiddenColumns.forEach(function (c) {
                    table.column(c).visible(true)
                    console.log(hiddenColumns)
                })

                // Reveal if unchecked
            } else if ($(this).prop('checked')===false){
                {#console.log(`Revealing columns for ${checkboxValue}`)#}
                //if (checkboxValue === "Mean") {
                //    setVisibleByIndexArray(meanColumns)
                //}
                // if (checkboxValue === "Standard Error") {
                //     setVisibleByIndexArray(standardErrorColumns)
                // }
                if (checkboxValue === "Percentiles") {
                    setVisibleByIndexArray(percentilesColumns)
                }
                if (checkboxValue === "DRI Comparison") {
                    setVisibleByIndexArray(driColumns)
                }
            }

            function setVisibleByIndexArray(colIndexes) {
                colIndexes.forEach(function (d) {
                    hiddenColumns = hiddenColumns.filter(item => item !==  d)
                    table.column(d).visible(false)})

                // Remove duplicates and show those not unchecked
                hiddenColumns = [...new Set(hiddenColumns)];
                hiddenColumns.forEach(function (c) {
                    table.column(c).visible(true)
                    console.log(hiddenColumns)
                })


            }

        });
    });

    jQuery.fn.tableToCSV = function () {
        let clean_text = function (text) {
            text = text.replace(/"/g, '\\"').replace(/'/g, "\\'");
            return '"' + text + '"';
        };

        $(this).each(function () {
            let table = $(this);
            let caption = $(this).find('caption').text();
            let title = [];
            let rows = [];

            $(this).find('tr').each(function () {
                let data = [];
                $(this).find('th').each(function () {
                    let text = clean_text($(this).text());
                    title.push(text);
                });
                $(this).find('td').each(function () {
                    let text = clean_text($(this).text());
                    data.push(text);
                });
                data = data.join(",");
                rows.push(data);
            });
            title = title.join(",");
            rows = rows.join("\n");

            let csv = title + rows;
            let uri = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv);
            let download_link = document.createElement('a');
            download_link.href = uri;
            let ts = new Date().getTime();
            if (caption == "") {
                download_link.download = ts + ".csv";
            } else {
                download_link.download = caption + "-" + ts + ".csv";
            }
            document.body.appendChild(download_link);
            download_link.click();
            document.body.removeChild(download_link);
        });
    };


    // Add download functionality for Filtered Data button
    $("#filteredTableDownload").click(function () {
        $("#dataset-filter").tableToCSV()
    })

    /*
    TODO: If % above or below DRIs is selected, the table should only display
        the DRI columns relevant to the selected nutrient. For example: Sodium has an AI and a CDRR,
        so the table should not include the columns for EAR, AMDR, UL
    */


</script>

</body>
</html>

